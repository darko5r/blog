<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>My Posts</title>
  </head>
  <body>
    <h1>My Posts</h1>
    <table>
      <thead>
        <tr>
          <th>Title</th>
          <th>Author</th>
          <th>Content</th>
          <th>Date</th>
          <th>Category</th>
        </tr>
      </thead>
      <tbody id="post-table-body"></tbody>
    </table>
    
    <script src="https://www.gstatic.com/firebasejs/7.21.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.21.1/firebase-database.js"></script>
    <script>
      // Initialize Firebase
       var firebaseConfig = {
        apiKey: "AIzaSyBB00grLIfvhq7EEQV6qiZUZuayP4-GoAg",
        authDomain: "blog-25253.firebaseapp.com",
        databaseURL: "https://blog-25253-default-rtdb.europe-west1.firebasedatabase.app",
        projectId: "blog-25253",
        storageBucket: "blog-25253.appspot.com",
        messagingSenderId: "906101390805",
        appId: "1:906101390805:web:871c51f2486921f443115c",
        measurementId: "G-MY3P2TWN4L"
      };
      firebase.initializeApp(firebaseConfig);
      
      // Reference to the posts in the Firebase Database
      var postsRef = firebase.database().ref("posts");

      // Read the posts from the Firebase Database
      postsRef.on("value", function(snapshot) {
        // Get the posts data
        var posts = snapshot.val();

        // Loop through the posts and add them to the table
        
        const postsRef = firebase.database().ref('posts');
const categoriesRef = firebase.database().ref('categories');

// Create a dictionary of categories
let categories = {};
categoriesRef.once('value', snapshot => {
  snapshot.forEach(childSnapshot => {
    const category = childSnapshot.val();
    categories[category.categoryid] = category;
  });
});

// Retrieve the posts with the corresponding category
const tableBody = document.querySelector('#post-table tbody');
postsRef.on('value', snapshot => {
  tableBody.innerHTML = '';
  snapshot.forEach(childSnapshot => {
    const post = childSnapshot.val();
    const category = categories[post.categories.category1];
    const row = document.createElement('tr');
    row.innerHTML = `
      <td>${post.postTitle}</td>
      <td>${post.postAuthor}</td>
      <td>${post.postContent}</td>
      <td>${post.postDate}</td>
      <td>${category ? category.categoryName : ''}</td>
    `;
    tableBody.appendChild(row);
  });
});      
        
    </script>
  </body>
</html>
