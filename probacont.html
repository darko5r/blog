<!DOCTYPE html>
<html>
  <head>
    <title>My Website</title>
    
    <style>
  /* Reset default margin and padding */
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  /* Set container to full width and height */
  .container {
    max-width: 100%;
    margin: 0 auto;
    height: 100%;
  }

  header {
    background-color: #fff;
    color: #333;
    padding: 5px 10px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    border: 1px solid #ccc;
    border-bottom: 10px solid #ccc;
    border-bottom-left-radius: 50% 10px;
    border-bottom-right-radius: 50% 10px;
  }


  /* Style navigation area */
   nav {
    display: flex;
    align-items: center;
  }



  /* Style navigation links */
  #links-list {
    list-style: none;
    margin: 0;
    padding: 0;
    display: flex;
    align-items: center;
  }

  #links-list li {
    margin-bottom: 0px;
  }

  #links-list li a {
    display: block;
    background-color: #f2f2f2;
    padding: 8px;
    color: #333;
    text-decoration: none;
    border-radius: 5px;
    font-size: 14px;
    margin-right: 10px;
  }

  #links-list li a:hover {
    background-color: #ccc;
  }
      
  
  /* Style login and register links */
.login, .register {
  margin-right: 10px;
  color: #333;
  text-decoration: none;
  
  display: block;
  font-size: 0.8em;
  font-weight: bold;
  text-transform: uppercase;
  color: #ccc;
  background-color: #555;
  background: -webkit-linear-gradient(#888, #555);
  background: linear-gradient(#888, #555);
  border: 0 none;
  border-radius: 3px;
  text-shadow: 0 -1px 0 #000;
  box-shadow: 0 1px 0 #666, 0 5px 0 #444, 0 6px 6px rgba(0,0,0,0.6);
  cursor: pointer;
  -webkit-transition: all 150ms ease;
  transition: all 150ms ease;
}
      
      
  .login:hover, .register:hover, .login:focus, .register:focus
{
	-webkit-animation: pulsate 1.2s linear infinite;
	animation: pulsate 1.2s linear infinite;
}
	
@-webkit-keyframes pulsate
{
	0%   { color: #ddd; text-shadow: 0 -1px 0 #000; }
	50%  { color: #fff; text-shadow: 0 -1px 0 #444, 0 0 5px #ffd, 0 0 8px #fff; }
	100% { color: #ddd; text-shadow: 0 -1px 0 #000; }
}
		
@keyframes pulsate
{
	0%   { color: #ddd; text-shadow: 0 -1px 0 #000; }
	50%  { color: #fff; text-shadow: 0 -1px 0 #444, 0 0 5px #ffd, 0 0 8px #fff; }
	100% { color: #ddd; text-shadow: 0 -1px 0 #000; }
}

.login:active, .register:active
{
	color: #fff;
	text-shadow: 0 -1px 0 #444, 0 0 5px #ffd, 0 0 8px #fff;
	box-shadow: 0 1px 0 #666, 0 2px 0 #444, 0 2px 2px rgba(0,0,0,0.9);
	-webkit-transform: translateY(3px);
	transform: translateY(3px);
	    
 }
            

/* Style search field */
label {
  display: flex;
  align-items: center;
  background-color: white;
  color: #FFF;
}

label input {
  -moz-box-shadow: inset -1px -1px 2px #CCC;
  -webkit-box-shadow: inset -1px -1px 2px #CCC;
  box-shadow: inset -1px -1px 2px #CCC;
  border-radius: 5px;
  background-color: white;
  color: #808081;
  border: none;
  padding: 10px;
  width: 200px;
}

  
      

  /* Style content area */
  main {
    max-width: 1366px;
    margin: 0 auto;
    padding: 20px;
  }
	    
   /* Style the post list container */
      
      
         .post-list-wrapper {
          display: flex;        
       }
      
      
         #post-list {
          display: flex;
          flex-wrap: wrap;
          justify-content: space-between;
          gap: 0px;
          padding: 0px;
          background-color: #f9f9f9;
          max-width: 38%;
          float: left;
          margin-right: 6px;
       }

         #post-list2 {
          float: right;
          width: 28%;
          position: relative;
       }
      
         #post-list2::before {
          content: '';
          position: absolute;
          top: 20px;
          bottom: 20px;
          left: -6px;
          width: 1px;
          height: calc(100% - 40px);
          background-color: #ddd;
          animation: line-animation 1s ease-in-out infinite;
       }
      
        #post-list2::after {
         content: '';
         position: absolute;
         top: 20px;
         bottom: 20px;
         right: -6px;
         width: 1px;
         height: calc(100% - 40px);
         background-color: #ddd;
         animation: line-animation 1s ease-in-out infinite;
      }

       @keyframes line-animation {
         0% {
         height: 0;
         top: 50%;
      }
         50% {
         height: 50%;
         top: 25%;
      }
         100% {
         height: 100%;
         top: 0%;
      }
     }
      
         #top-posts div {
          margin-left: 12px;
        }

               
      /* Style the hr separator */
         hr {
          border: none;
          border-top: 1px solid red !important;
          margin: 0;
        }
      
         .post-image {
          display: block;
          width: 488px;
          height: 268px;
          margin-bottom: 10px;
        }

         .post-title {
          display: block; /* set the title to display as a block element */
          font-size: 24px; 
          font-weight: bold;
        } 
      
         body {
          margin: 0;
          padding: 0;
        }	    
	    

  /* Style footer area */
  footer {
    background-color: #333;
    color: #fff;
    padding: 10px;
    text-align: center;
  }
</style>

    
  </head>
  <body>
    <div class="container">
      <header>
        <div style="width: 33.33%; display: flex; align-items: center;">
          <img class="logo" src="https://via.placeholder.com/50x50" alt="Logo">
        </div>
        <div style="width: 33.33%; display: flex; justify-content: center;">
          <ul id="links-list"></ul>          
        </div>
        <div style="width: 33.33%; display: flex; align-items: center; justify-content: flex-end;">
          <a class="login" href="#">Log in</a>
          <a class="register" href="#">Register</a>
          <label>Search <input type="text" placeholder="Search" /></label>
        </div>
        
            <script src="https://www.gstatic.com/firebasejs/7.21.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.21.1/firebase-database.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    
       
    <script>
      // Initialize Firebase
      var firebaseConfig = {
        apiKey: "AIzaSyBB00grLIfvhq7EEQV6qiZUZuayP4-GoAg",
        authDomain: "blog-25253.firebaseapp.com",
        databaseURL: "https://blog-25253-default-rtdb.europe-west1.firebasedatabase.app",
        projectId: "blog-25253",
        storageBucket: "blog-25253.appspot.com",
        messagingSenderId: "906101390805",
        appId: "1:906101390805:web:871c51f2486921f443115c",
        measurementId: "G-MY3P2TWN4L"
      };
      firebase.initializeApp(firebaseConfig);
      
      // Reference to the links in the Firebase Database
var linksRef = firebase.database().ref("links");

// Read the links from the Firebase Database
linksRef.on("value", function(snapshot) {
  // Get the links data
  var links = snapshot.val();

  // Loop through the links and add them to the list
  $.each(links, function(key, link) {
    $("#links-list").append("<li><a href='" + link.url + "'>" + key + "</a></li>");
  });
});

        </script>
      </header>
      <main>
        <h1>The blog is under construction</h1>

    <!-- Display a list of posts -->
    <div class="post-list-wrapper">
      <div id="post-list">
        <!-- firebase -->
      </div>
      <div id="post-list2">
        <!-- firebase -->
      </div>
      <div id="top-posts">
       <!-- Top posts will be displayed here -->
      </div>
   </div>

    <div id="post-list"></div>
    <div id="post-list2"></div>
    <div id="top-posts"></div>

              
    <script>
     var database = firebase.database();
     var postsRef = database.ref("posts");
     var categoriesRef = database.ref("categories");
                
     categoriesRef.child("category1").once("value", function(snapshot) {
     // Get the category data
     var categoryData = snapshot.val();

     // Get the posts for this category
     var posts = [];
     for (var postId in categoryData.posts) {
       if (categoryData.posts.hasOwnProperty(postId)) {
         posts.push(postId);
       }
     }
    
     var postPageMap = {  // map more links
        "post1": "proba2.html",
        "post2": "proba6.html",
        // add more postId to page mappings as needed
     }

     // Read the posts data and add them to the list
     postsRef.once("value", function(snapshot) {
       var postsData = snapshot.val();
       var postList = document.getElementById("post-list");
       var postDiv = document.createElement("div");
       var titleLink = document.createElement("a");
       var image = document.createElement("img");
       var content = document.createElement("p");
       var hr = document.createElement("hr");
      
       // Set the post title, image, and excerpt
       titleLink.innerText = postsData.post1.postTitle;
       titleLink.href = postPageMap["post1"];
       titleLink.className = "post-title";
       image.src = postsData.post1.postImage;
       image.alt = "Post image";
       image.classList.add("post-image");
       content.innerText = postsData.post1.postContent.substring(0, 250) + "...";
       content.style.width = "488px";  // set the width of the content element
      
       // Add the post content to the postDiv
       postDiv.appendChild(image);
       postDiv.appendChild(titleLink);
       postDiv.appendChild(content);
       postDiv.appendChild(hr);
      
       // Create a list for the other posts
       var otherPostsList = document.createElement("ul");
       otherPostsList.className = "other-posts-list";
      
       // Create title links for the other posts of the same category
       for (var i = 1; i < posts.length && i < 4; i++) {
         var postId = posts[i];
         var post = postsData[postId];
         var otherPostItem = document.createElement("li");
         var otherPostTitleLink = document.createElement("a");
        
         otherPostTitleLink.innerText = post.postTitle;
         otherPostTitleLink.href = postPageMap[postId];
        
         otherPostItem.appendChild(otherPostTitleLink);
         otherPostsList.appendChild(otherPostItem);
        }
      
       // Add the other posts list to the postDiv
       postDiv.appendChild(otherPostsList);
      
       // Add the postDiv to the postList
       postList.appendChild(postDiv);
        });
       });
      
       categoriesRef.child("category2").once("value", function(snapshot) {
       // Get the category data
       var categoryData = snapshot.val();

       // Get the posts for this category
       var posts = [];
        for (var postId in categoryData.posts) {
         if (categoryData.posts.hasOwnProperty(postId)) {
            posts.push(postId);
         }
        }
    
        var postPageMap = {
          "post5": "proba5.html",
          // add more postId to page mappings as needed 
        }

        // Read the posts data and add them to the list   // TODO: add 2nd image to firebase, set image size, ->                                                    
        postsRef.once("value", function(snapshot) {       // -> make room for recent and most viewed posts headings <h2></h2>, make them clickable links ->
        var postsData = snapshot.val();                   // -> change link color to black
        var postList = document.getElementById("post-list2");
        var postDiv = document.createElement("div");
        var titleLink = document.createElement("a");
        var image = document.createElement("img");
        var content = document.createElement("p");
        var hr = document.createElement("hr");
      
        // Set the post title, image, and excerpt
        titleLink.innerText = postsData.post5.postTitle;
        titleLink.href = postPageMap["post5"];
        titleLink.className = "post-title";
        image.src = postsData.post5.postImage;
        image.alt = "Post image";
        image.classList.add("post-image");
        content.innerText = postsData.post5.postContent.substring(0, 250) + "...";
        content.style.width = "488px";  // set the width of the content element
      
        // Add the post content to the postDiv
        postDiv.appendChild(image);
        postDiv.appendChild(titleLink);
        postDiv.appendChild(content);
        postDiv.appendChild(hr);
      
        // Create a list for the other posts
        var otherPostsList = document.createElement("ul");
        otherPostsList.className = "other-posts-list";
      
        // Create title links for the other posts of the same category
        for (var i = 1; i < posts.length && i < 4; i++) {
          var postId = posts[i];
          var post = postsData[postId];
          var otherPostItem = document.createElement("li");
          var otherPostTitleLink = document.createElement("a");
        
          otherPostTitleLink.innerText = post.postTitle;
          otherPostTitleLink.href = postPageMap[postId];
        
          otherPostItem.appendChild(otherPostTitleLink);
          otherPostsList.appendChild(otherPostItem);
         }
      
         // Add the other posts list to the postDiv
         postDiv.appendChild(otherPostsList);
      
         // Add the postDiv to the postList
         postList.appendChild(postDiv);
          });
         });
      
      
      
         var postPageMap = {
          "post1": "proba2.html",
          "post2": "proba6.html",
          // add more postId to page mappings as needed
          };
      
      
         // Retrieve top posts by readCount in descending order
         var topPostsRef = firebase.database().ref('posts').orderByChild('readCount').limitToLast(5);
         topPostsRef.on('value', function(snapshot) {
         var postsArray = [];
         snapshot.forEach(function(childSnapshot) {
          var childKey = childSnapshot.key;
          var childData = childSnapshot.val();
          childData.postId = childKey; // Add the postId to the childData object
         // Add the post to the array
         postsArray.push(childData);
         });
         // Reverse the array to show posts in descending order
         postsArray.reverse();
         // Display the posts on the page
         postsArray.forEach(function(childData) {
          var postElement = document.createElement('div');
          var postLink = document.createElement('a');
          postLink.href = postPageMap[childData.postId];  // need to implement real links
          postLink.textContent = childData.postTitle;
          postElement.appendChild(postLink);
          postElement.innerHTML += '<p>Read count: ' + childData.readCount + '</p>';
          document.getElementById('top-posts').appendChild(postElement);    
          });
         }); 
      
      </script>  
      </main>
  <footer>
    <p>&copy; 2023 My Website</p>
  </footer>
</div>

  </body>
</html>
