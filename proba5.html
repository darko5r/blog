<!DOCTYPE html>
<html>
  <head>
    <script src="https://www.gstatic.com/firebasejs/7.17.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.17.1/firebase-database.js"></script>
    <script>
      var firebaseConfig = {
        apiKey: "AIzaSyBB00grLIfvhq7EEQV6qiZUZuayP4-GoAg",
        authDomain: "blog-25253.firebaseapp.com",
        databaseURL: "https://blog-25253-default-rtdb.europe-west1.firebasedatabase.app",
        projectId: "blog-25253",
        storageBucket: "blog-25253.appspot.com",
        messagingSenderId: "906101390805",
        appId: "1:906101390805:web:871c51f2486921f443115c",
        measurementId: "G-MY3P2TWN4L"
      };

      firebase.initializeApp(firebaseConfig);
      var database = firebase.database();

      var linksRef = database.ref("Links");

      linksRef.on("value", function(snapshot) {
        var links = snapshot.val();

        var linksList = document.getElementById("linksList");
        linksList.innerHTML = "";

        for (var key in links) {
          var link = links[key];

          var name = link.name;
          var url = link.url;

          var listItem = document.createElement("li");
          listItem.innerHTML = `<input type="checkbox" id="${key}" data-name="${name}" data-url="${url}" /> ${name} (${url})`;
          linksList.appendChild(listItem);
        }
      });

      function updateLinks() {
        var checkboxes = document.querySelectorAll("input[type='checkbox']:checked");

        checkboxes.forEach(function(checkbox) {
          var key = checkbox.id;
          var name = checkbox.getAttribute("data-name");
          var url = checkbox.getAttribute("data-url");

          var linkRef = linksRef.child(key);
          linkRef.update({ name: name, url: url });
        });
      }
    </script>
  </head>
  <body>
    <ul id="linksList"></ul>
    <button onclick="updateLinks()">Update</button>
  </body>
</html>
