<!DOCTYPE html>
<html>
  <head>
    <script src="https://www.gstatic.com/firebasejs/7.17.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.17.1/firebase-database.js"></script>
  </head>
  <body>
    
    <style>
    #toggle-button:hover {
      transform: rotate(360deg);
      transition: transform 0.3s ease-in-out;
    }
    </style>

    <div><p>Toggle Links:<button id="toggle-button" style="border: none; background-color: transparent; font-weight: bold; font-size: 16px;" onMouseOver="this.style.color='#ec2f2f'" onMouseOut="this.style.color='#212020'">➕</button></p></div>
<div id="toggle-menu" class="toggle-menu" style="border: none; background-color: transparent;">
  <div id="link-list"></div>
 
  <button id="update-selected-links">Update Selected</button>
  
</div>

    
    <script>
      // firebase configuration and setup
      var firebaseConfig = {
        apiKey: "AIzaSyBB00grLIfvhq7EEQV6qiZUZuayP4-GoAg",
        authDomain: "blog-25253.firebaseapp.com",
        databaseURL: "https://blog-25253-default-rtdb.europe-west1.firebasedatabase.app",
        projectId: "blog-25253",
        storageBucket: "blog-25253.appspot.com",
        messagingSenderId: "906101390805",
        appId: "1:906101390805:web:871c51f2486921f443115c",
        measurementId: "G-MY3P2TWN4L"
      };

      firebase.initializeApp(firebaseConfig);
      var database = firebase.database();
      
      
      var menuExpanded = false;

  function toggleMenu() {
    var toggleMenu = document.getElementById("toggle-menu");
    var toggleButton = document.getElementById("toggle-button");

    if (menuExpanded) {
      toggleMenu.style.display = "none";
      toggleButton.textContent = "➕";
    } else {
      toggleMenu.style.display = "block";
      toggleButton.textContent = "➖";
    }

    menuExpanded = !menuExpanded;
  }

  document.getElementById("toggle-button").addEventListener("click", toggleMenu);
  document.getElementById("toggle-menu").style.display = "none";

      // firebase event listener
      
      database.ref("links").on("value", function(snapshot) {
  var links = snapshot.val();
  var linkList = document.getElementById("link-list");
  linkList.innerHTML = "";
  for (var link in links) {
  linkList.innerHTML += `
    <div>
      <input type="checkbox" id="${link}">
      <label for="${link}">${link} (${links[link].url})</label>
    </div>
  `;
}             
});
      
  var inputFieldsOpen = false;
document.getElementById("update-selected-links").addEventListener("click", function() {
  if (inputFieldsOpen) {
    // Show message with "Yes" and "No" buttons
    var message = document.createElement("p");
    message.innerText = "Update Selected is already pressed, fill up the input fields or choose again";

    var yesButton = document.createElement("button");
    yesButton.innerText = "Yes";
    yesButton.addEventListener("click", function() {
      inputFieldsOpen = false;
    });

    document.getElementById("update-selected-links").addEventListener("click", function() {
  var message = document.getElementById("update-message");
  if (message) {
    message.remove();
  } else {
    var linkList = document.getElementById("link-list");
    var checkboxes = linkList.getElementsByTagName("input");
    var inputsExist = false;
    for (let i = 0; i < checkboxes.length; i++) {
      if (checkboxes[i].checked) {
        inputsExist = true;
        break;
      }
    }
    if (inputsExist) {
      var linkNameInput = document.getElementById("link-name-input");
      var linkUrlInput = document.getElementById("link-url-input");
      var updateButton = document.getElementById("update-button");
      if (linkNameInput && linkUrlInput && updateButton) {
        var message = document.createElement("div");
        message.id = "update-message";
        message.innerHTML = "Update Selected is already pressed, fill up the input fields or choose again<br>" +
          "<button id='yes-button'>Yes</button><button id='no-button'>No</button>";
        linkList.appendChild(message);
        document.getElementById("yes-button").addEventListener("click", function() {
          message.remove();
        });
        document.getElementById("no-button").addEventListener("click", function() {
          message.remove();
        });
      } else {
        // Create input fields for link name and URL
        linkNameInput = document.createElement("input");
        linkNameInput.type = "text";
        linkNameInput.id = "link-name-input";
        linkNameInput.placeholder = "Link name";

        linkUrlInput = document.createElement("input");
        linkUrlInput.type = "text";
        linkUrlInput.id = "link-url-input";
        linkUrlInput.placeholder = "Link URL";

        // Create an "Update" button
        updateButton = document.createElement("button");
        updateButton.id = "update-button";
        updateButton.innerText = "Update";
        updateButton.addEventListener("click", function() {
          var newLinkName = linkNameInput.value;
          var newLinkUrl = linkUrlInput.value;
          
          for (let i = 0; i < checkboxes.length; i++) {
        if (checkboxes[i].checked) {
          var parent = checkboxes[i].parentNode;
          parent.getElementsByClassName("link-name")[0].innerText = newLinkName;
          parent.getElementsByClassName("link-url")[0].innerText = newLinkUrl;
        }
      }

      linkNameInput.value = "";
      linkUrlInput.value = "";
    });

    linkList.appendChild(linkNameInput);
    linkList.appendChild(linkUrlInput);
    linkList.appendChild(updateButton);
  }
} else {
  alert("Please select at least one link to update");
}
    }
});
         
    </script>
</body>
</html>
